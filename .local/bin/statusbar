#!/bin/bash

# Simple dwm statusbar script

up() {
    uptime -p
}
disk_space() {
    echo "avail:$(df -h --output=avail /home | sed 1d)"
}
volume() {
    echo "VOL:$(pamixer --get-volume-human)"
}
battery() {
    echo "BAT:$(cat /sys/class/power_supply/BAT0/capacity)"
}
datetime() {
    date +"%d.%m.%y %R"
}
mail() {
    unread="$(find "${XDG_DATA_HOME:-$HOME/.local/share}"/mail/*/[Ii][Nn][Bb][Oo][Xx]/new/* -type f | wc -l 2>/dev/null)"
    echo "MAIL:$unread"
}
while(true); do
    xsetroot -name "$(disk_space)|$(volume)|$(battery)|$(mail)|$(datetime)|"
    sleep 2
done
